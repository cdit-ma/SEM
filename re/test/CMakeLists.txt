set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test/gtest)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY_$<CONFIG> ${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/test/gtest)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/test/gtest)
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY_$<CONFIG> ${CMAKE_LIBRARY_OUTPUT_DIRECTORY}/test/gtest)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}/test/gtest)
set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY_$<CONFIG> ${CMAKE_ARCHIVE_OUTPUT_DIRECTORY}/test/gtest)

if(MSVC)
    set(gtest_force_shared_crt ON CACHE BOOL "" FORCE)
endif(MSVC)

set(RE_TEST_SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}")

add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/common")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/core")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/logan")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/workers")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/middleware")
add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/re_common")

if(BUILD_REGEN_TEST)
	message(STATUS "Building re_gen tests")
	#Build the test
	add_subdirectory("${CMAKE_CURRENT_SOURCE_DIR}/re_gen")
endif(BUILD_REGEN_TEST)
